#:import NoTransition kivy.uix.screenmanager.NoTransition

<Label>
    size_hint: 0.1,0.1
    font_size:17
    color: 0,0,0,1
<ProgressBar>
    min:0
    max:100
<Button>
    size_hint:0.26,0.1

ScreenManager:
    transition: NoTransition()
    id: screen_manager
    var: 0

    MainPage:
        name: 'mainpage'
        id: main
        location_infotxt: location_info
        tcpip: tcpip
        port: port
        canvas.before:
            Color:
                rgba: (1, 1, 1, 1)
            Rectangle:
                pos:self.pos
                size:self.size

        FloatLayout:
            Label:
                text: "TCP/IP:"
                font_size: 19
                pos_hint: {"x": 0.2, "y": 0.8}
            TextInput:
                id: tcpip
                text: ""
                multiline: False
                size_hint: 0.5,0.1
                pos_hint: {"x": 0.3, "y": 0.8}
            Label:
                text: "Port:"
                font_size: 19
                pos_hint: {"x": 0.2, "y": 0.7}
            TextInput:
                id: port
                text: ""
                multiline: False
                size_hint: 0.5,0.1
                pos_hint: {"x": 0.3, "y": 0.70}
            Button:
                text:"Enter"
                size_hint: 0.1,0.06
                pos_hint: {"x": 0.82, "y": 0.795}
                on_release:
                    main.start_tcp()
                    app.root.current = "exercisepage"

            Button:
                text:"Deneyler"
                size_hint: 0.4,0.4
                pos_hint: {"x": 0.05, "y": 0.2}
                on_release:
                    app.root.current = "exercisepage"
            Button:
                text:"Kamera"
                size_hint: 0.4,0.4
                pos_hint: {"x": 0.55, "y": 0.2}
                on_release:
                    app.root.current = "campage"



    ExercisePage:
        name: 'exercisepage'
        id: excs
        location_infotxt: location_info
        var: screen_manager.var
        canvas.before:
            Color:
                rgba: (1, 1, 1, 1)
            Rectangle:
                pos:self.pos
                size:self.size

        FloatLayout:
            Button:
                text:"Deney"
                size_hint: 0.5,0.075
                pos_hint: {"x": 0, "top": 0.075}
                on_release:
                    app.root.current = "exercisepage"

            Button:
                text:"Kamera"
                size_hint: 0.5,0.075
                pos_hint: {"x": 0.5, "top": 0.075}
                on_release:
                    app.root.current = "campage"

            Label:
                text:"DENEYLER"
                font_size: 22
                pos_hint: {"center_x": 0.5, "top": 0.9}
        ScrollView:
            size_hint_y: .73
            pos_hint: {"x": 0, "y": .11}
            do_scroll_x: False
            do_scroll_y: True

            GridLayout:
                size: root.width, root.height
                size_hint_x: None
                size_hint_y: None
                cols: 1
                height: self.minimum_height
                row_default_height: 180
                row_force_default: True

                Button:
                    text:"Deney 1"
                    on_release:
                        root.var = 100
                        app.root.current = "popup"

                Button:
                    text:"Deney 2"
                    on_release:
                        root.var = 200
                        app.root.current = "popup"

                Button:
                    text:"Deney 3"
                    on_release:
                        root.var = 300
                        app.root.current = "popup"

                Button:
                    text:"Deney 4"
                    on_release:
                        root.var = 400
                        app.root.current = "popup"

                Button:
                    text:"Deney 5"
                    on_release:
                        root.var = 500
                        app.root.current = "popup"

                Button:
                    text:"Deney 6"
                    on_release:
                        root.var = 600
                        app.root.current = "popup"

                Button:
                    text:"Deney 7"
                    on_release:
                        root.var = 700
                        app.root.current = "popup"

                Button:
                    text:"Deney 8"
                    on_release:
                        root.var = 800
                        app.root.current = "popup"

                Button:
                    text:"Deney 9"
                    on_release:
                        root.var = 900
                        app.root.current = "popup"

                Button:
                    text:"Deney 10"
                    on_release:
                        root.var = 1000
                        app.root.current = "popup"

                Button:
                    text:"Deney 11"
                    on_release:
                        root.var = 1100
                        app.root.current = "popup"

                Button:
                    text:"Deney 12"
                    on_release:
                        root.var = 1200
                        app.root.current = "popup"

                Button:
                    text:"Deney 13"
                    on_release:
                        root.var = 1300
                        app.root.current = "popup"

                Button:
                    text:"Deney 14"
                    on_release:
                        root.var = 1400
                        app.root.current = "popup"

                Button:
                    text:"Deney 15"
                    on_release:
                        root.var = 1500
                        app.root.current = "popup"

                Button:
                    text:"Deney 16"
                    on_release:
                        root.var = 1600
                        app.root.current = "popup"

                Button:
                    text:"Deney 17"
                    on_release:
                        root.var = 1700
                        app.root.current = "popup"

                Button:
                    text:"Deney 18"
                    on_release:
                        root.var = 1800
                        app.root.current = "popup"

                Button:
                    text:"Deney 19"
                    on_release:
                        root.var = 1900
                        app.root.current = "popup"

                Button:
                    text:"Deney 20"
                    on_release:
                        root.var = 2000
                        app.root.current = "popup"

                Button:
                    text:"Deney 21"
                    on_release:
                        root.var = 2100
                        app.root.current = "popup"

                Button:
                    text:"Deney 22"
                    on_release:
                        root.var = 2200
                        app.root.current = "popup"

                Button:
                    text:"Deney 23"
                    on_release:
                        root.var = 2300
                        app.root.current = "popup"

                Button:
                    text:"Deney 24"
                    on_release:
                        root.var = 2400
                        app.root.current = "popup"

                Button:
                    text:"Deney 25"
                    on_release:
                        root.var = 2500
                        app.root.current = "popup"

                Button:
                    text:"Deney 26"
                    on_release:
                        root.var = 2600
                        app.root.current = "popup"

                Button:
                    text:"Deney 27"
                    on_release:
                        root.var = 2700
                        app.root.current = "popup"



    ExercisePopUp:
        name: 'popup'
        id: pop
        location_info: location_info
        var: screen_manager.var
        my_ico1: my_ico1
        canvas.before:
            Color:
                rgba: (1, 1, 1, 1)
            Rectangle:
                pos:self.pos
                size:self.size

        FloatLayout:
            Button:
                text:"Elektropnömatik Kumanda Devresi"
                size_hint: 0.35,0.075
                pos_hint: {"x": 0.1, "top": 0.9}
                on_release:
                    app.root.current = "circuit"

            Button:
                text:"PLC Devresi"
                size_hint: 0.35,0.075
                pos_hint: {"x": 0.1, "top": 0.8}
                on_release:
                    app.root.current = "plc"

            Button:
                text:"Kamera"
                size_hint: 0.35,0.075
                pos_hint: {"x": 0.1, "top": 0.7}
                on_release:
                    app.root.current = "campage"

            Button:
                text:"Başlat"
                size_hint: 0.2,0.075
                pos_hint: {"x": 0.175, "top": 0.5}
                on_release:
                    pop.deneme()

            Button:
                text:"Durdur"
                size_hint: 0.1,0.075
                pos_hint: {"x": 0.225, "top": 0.4}
                on_release:
                    pop.stopbutton()

            Label:
                text: "Piston 1"
                pos_hint: {"x": 0.17, "top": 0.3}

            Label:
                text: "Piston 2"
                pos_hint: {"x": 0.27, "top": 0.3}

            Image:
                id: my_ico1
                source: pop.img_ico
                size_hint_x: 0.04
                allow_stretch: True
                pos_hint: {"x": 0.2, "top": 0.7}

            Image:
                source: pop.img_ico
                size_hint_x: 0.04
                allow_stretch: True
                pos_hint: {"x": 0.3, "top": 0.7}

            TextInput:
                id: location_info
                text:""
                size_hint: 0.4,0.825
                pos_hint: {"x": 0.55, "top": 0.9}
                disabled: True

            Button:
                text:"Geri"
                size_hint: 0.2,0.075
                pos_hint: {"x": 0, "y": 0}
                on_release:
                    app.root.current = "exercisepage"

            Button:
                text:"test"
                size_hint: 0.05,0.05
                pos_hint: {"x": 0.12, "top": 0.22}
                on_release:
                    pop.testico()


    CircuitPage:
        name: 'circuit'
        id: circ
        my_image1: my_image1
        var: screen_manager.var
        canvas.before:
            Color:
                rgba: (1, 1, 1, 1)
            Rectangle:
                pos:self.pos
                size:self.size

        FloatLayout:
            GridLayout:
                cols: 1
                pos_hint: {"top": .995, "left": 1}
                size_hint: 1, .895
                StencilView:
                    id: stencil1
                    Scatter:
                        id: scatter
                        pos: stencil1.pos
                        size: my_image1.size
                        Image:
                            id: my_image1
                            source: circ.img_src
                            allow_stretch: True
                            keep_ratio: True
                            size: stencil1.width, stencil1.height

            Button:
                text:"Geri"
                size_hint: 0.2,0.075
                pos_hint: {"x": 0, "y": 0}
                on_release:
                    app.root.current = "popup"
            Button:
                text:"Sonraki"
                size_hint: 0.2,0.075
                pos_hint: {"x": 0.8, "y": 0}
                on_release:
                    app.root.current = "player"

            Button:
                text:"Önceki"
                size_hint: 0.2,0.075
                pos_hint: {"x": 0.6, "y": 0}



    CircuitPage2:
        name: 'circuit2'
        id: circ2
        my_image2: my_image2
        var: screen_manager.var
        canvas.before:
            Color:
                rgba: (1, 1, 1, 1)
            Rectangle:
                pos:self.pos
                size:self.size

        FloatLayout:
            GridLayout:
                cols: 1
                pos_hint: {"top": .995, "x": 0}
                size_hint: 0.7, .895
                StencilView:
                    id: stencil2
                    Scatter:
                        id: scatter
                        pos: stencil2.pos
                        size: my_image2.size
                        Image:
                            id: my_image2
                            source: circ2.img2_src
                            allow_stretch: True
                            keep_ratio: True
                            size: stencil2.width, stencil2.height

            TextInput:
                text:"Bu bölüme dair açıklama."
                pos_hint: {"top": .895, "x": 0.7}
                size_hint: 0.3, .82

            Button:
                text:"Geri"
                size_hint: 0.2,0.075
                pos_hint: {"x": 0, "y": 0}
                on_release:
                    app.root.current = "player"
            Button:
                text:"Sonraki"
                size_hint: 0.2,0.075
                pos_hint: {"x": 0.8, "y": 0}
                on_release:
                    root.var = root.var + 1
                    circ2.image_source()
                    print(root.var)

            Button:
                text:"Önceki"
                size_hint: 0.2,0.075
                pos_hint: {"x": 0.6, "y": 0}
                on_release:
                    root.var = root.var - 1
                    if root.var%100 == 99: app.root.current = "player"
                    if root.var%100 == 99: root.var = root.var + 1
                    circ2.image_source()

    PlcPage:
        name: 'plc'
        my_image3: my_image3
        canvas.before:
            Color:
                rgba: (1, 1, 1, 1)
            Rectangle:
                pos:self.pos
                size:self.size

        FloatLayout:
            GridLayout:
                cols: 1
                pos_hint: {"top": .995, "left": 1}
                size_hint: 1, .895
                StencilView:
                    id: stencil3
                    Scatter:
                        id: scatter
                        pos: stencil3.pos
                        size: my_image3.size
                        Image:
                            id: my_image3
                            source: './img/PLC.png'
                            allow_stretch: True
                            keep_ratio: True
                            size: stencil3.width, stencil3.height

            Button:
                text:"Geri"
                size_hint: 0.2,0.075
                pos_hint: {"x": 0, "y": 0}
                on_release:
                    app.root.current = "popup"
            Button:
                text:"Sonraki"
                size_hint: 0.2,0.075
                pos_hint: {"x": 0.8, "y": 0}

            Button:
                text:"Önceki"
                size_hint: 0.2,0.075
                pos_hint: {"x": 0.6, "y": 0}


    Player:
        name: 'player'
        var: screen_manager.var
        my_video: my_video
        canvas.before:
            Color:
                rgba: (1, 1, 1, 1)
            Rectangle:
                pos:self.pos
                size:self.size

        FloatLayout:
            GridLayout:
                cols: 1
                pos_hint: {"top": .995, "left": 1}
                size_hint: 1, .895
                StencilView:
                    id: stencil4
                    Scatter:
                        id: scatter
                        pos: stencil4.pos
                        size: my_video.size
                        VideoPlayer:
                            id: my_video
                            source: "./img/vid100.mp4"
                            size: stencil4.width, stencil4.height
            Button:
                text:"Geri"
                size_hint: 0.2,0.075
                pos_hint: {"x": 0, "y": 0}
                on_release:
                    app.root.current = "popup"
            Button:
                text:"Sonraki"
                size_hint: 0.2,0.075
                pos_hint: {"x": 0.8, "y": 0}
                on_release:
                    app.root.current = "circuit2"

            Button:
                text:"Önceki"
                size_hint: 0.2,0.075
                pos_hint: {"x": 0.6, "y": 0}
                on_release:
                    app.root.current = "circuit"

    CamPage:
        name: 'campage'
        id: cam
        canvas.before:
            Color:
                rgba: (1, 1, 1, 1)
            Rectangle:
                pos:self.pos
                size:self.size
        FloatLayout:

            Label:
                text: " "
                font_size: 19
                pos_hint: {"x": 0.2, "top": 0.725}
            Button:
                text:"Geri"
                size_hint: 0.333,0.075
                pos_hint: {"x": 0, "top": 0.075}
                on_release:
                    app.root.current = "popup"
            Button:
                text:"Deney"
                size_hint: 0.333,0.075
                pos_hint: {"x": 0.333, "top": 0.075}
                on_release:
                    app.root.current = "exercisepage"
            Button:
                text:"Kamera"
                size_hint: 0.333,0.075
                pos_hint: {"x": 0.666, "top": 0.075}
                on_release:
                    app.root.current = "campage"



